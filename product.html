<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product - Mor</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="mor.css">
    <style>
        /* Styles from the old product pages, now centralized here */
        .product-page-container.loading {
            display: none; /* Hide until data is loaded */
        }
        .product-title-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }
        .share-btn {
            background: none;
            border: none;
            color: #d3d3d3;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: background-color 0.3s, color 0.3s;
        }
        .share-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <button class="hamburger-menu" aria-label="Open Menu"><i class="fas fa-bars"></i></button>
            <a href="index.html" class="logo"><img src="logo.jpg" alt="Mor Logo" class="logo-img" loading="lazy"></a>
            <div class="nav-links-container">
                <button class="close-menu" aria-label="Close Menu"><i class="fas fa-times"></i></button>
                <ul class="nav-links">
                    <li><a href="index.html#home">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="index.html#categories">Categories</a></li>
                    <li><a href="index.html#collections">Collections</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li class="mobile-only-link"><a href="cart.html" class="nav-link-button"><i class="fas fa-shopping-bag"></i> Cart</a></li>
                    <li class="mobile-only-link"><button class="nav-link-button" id="mobile-favorites-link"><i class="far fa-heart"></i> Favorites</button></li>
                    <li class="mobile-only-link" id="mobile-auth-link-container">
                        <a href="login.html" class="nav-link-button" id="mobile-login-link"><i class="fas fa-user"></i> Login</a>
                    </li>
                </ul>
            </div>
             <div class="nav-actions">
                <a href="search.html" class="search-btn" aria-label="Search"><i class="fas fa-search"></i></a>
                <a href="cart.html" class="nav-action-link" aria-label="Shopping Cart"><i class="fas fa-shopping-bag"></i><span class="cart-count" style="display: none;">0</span></a>
            </div>
        </nav>
    </header>

    <main style="margin-top: 65px;">
        <div class="product-page-container beautiful-product-page loading">
            <div class="product-gallery animate-slide-in-left">
                <div class="gallery-slider-container beautiful-gallery-main">
                    <div class="gallery-slider-track" id="gallery-slider-track">
                        <!-- Images will be injected by JS -->
                    </div>
                    <div class="product-favorite-icon page-favorite-icon" id="page-favorite-icon">
                        <i class="far fa-heart"></i>
                    </div>
                </div>
                <div class="gallery-dots-container animate-fade-in" id="gallery-dots-container" style="transition-delay: 0.2s;"></div>
            </div>
            <div class="product-details animate-slide-in-right beautiful-product-details">
                <div class="product-title-container animate-fade-in" style="transition-delay: 0.1s;">
                    <h1 id="product-name" class="beautiful-product-title"></h1>
                    <button class="share-btn" id="share-btn" aria-label="Share Product"><i class="fas fa-share-alt"></i></button>
                </div>
                <div class="product-price-container animate-fade-in beautiful-price-container" style="transition-delay: 0.2s;">
                    <p class="product-price" id="product-price"></p>
                    <p class="product-old-price" id="product-old-price"></p>
                    <p class="product-save-amount" id="product-save-amount"></p>
                </div>
                <div class="product-options animate-fade-in beautiful-product-options" style="transition-delay: 0.3s;">
                    <div class="option-group beautiful-option-group">
                        <label for="size-selector">Select Size:</label>
                        <div class="size-selector" id="size-selector">
                            <!-- Sizes will be injected by JS -->
                        </div>
                    </div>
                    <div class="option-group beautiful-option-group">
                        <label for="quantity-counter">Quantity:</label>
                        <div class="quantity-counter" id="quantity-counter">
                            <button class="quantity-btn" data-action="decrease">-</button>
                            <span class="quantity-value">1</span>
                            <button class="quantity-btn" data-action="increase">+</button>
                        </div>
                    </div>
                </div>
                <div class="product-actions animate-fade-in beautiful-product-actions" style="transition-delay: 0.4s;">
                    <button class="cta-btn add-to-cart-btn beautiful-add-to-cart" id="add-to-cart-btn"><i class="fas fa-shopping-cart"></i> Add to Cart</button>
                </div>
                <!-- New Modern Accordion -->
                <div class="modern-accordion-container">
                    <div class="modern-accordion-item">
                        <button class="modern-accordion-header">Description<i class="fas fa-plus"></i></button>
                        <div class="modern-accordion-content" id="accordion-description"></div>
                    </div>
                    <div class="modern-accordion-item">
                        <button class="modern-accordion-header">Specification<i class="fas fa-plus"></i></button>
                        <div class="modern-accordion-content" id="accordion-specification"></div>
                    </div>
                    <div class="modern-accordion-item">
                        <button class="modern-accordion-header">Wash Care<i class="fas fa-plus"></i></button>
                        <div class="modern-accordion-content"><p>Hand wash cold separately. Use mild detergent. Do not bleach. Dry in shade. Iron on low heat.</p></div>
                    </div>
                    <div class="modern-accordion-item">
                        <button class="modern-accordion-header">Returns and Exchange Policy<i class="fas fa-plus"></i></button>
                        <div class="modern-accordion-content"><p>Easy 7-day returns and exchanges. The product must be in its original condition with all tags intact. Please visit our returns center to initiate a request.</p></div>
                    </div>
                    <div class="modern-accordion-item">
                        <button class="modern-accordion-header">Manufactured and Packaged By<i class="fas fa-plus"></i></button>
                        <div class="modern-accordion-content"><p>Mor Fashion Pvt. Ltd., Jubilee Hills, Hyderabad, Telangana, 500033. Country of Origin: India.</p></div>
                    </div>
                    <div class="modern-accordion-item">
                        <button class="modern-accordion-header">Shipping Information<i class="fas fa-plus"></i></button>
                        <div class="modern-accordion-content"><p>Free shipping within Hyderabad. Standard shipping (5-7 business days) for other locations. Express shipping options are available at checkout.</p></div>
                    </div>
                    <div class="modern-accordion-item">
                        <button class="modern-accordion-header">For Complaints<i class="fas fa-plus"></i></button>
                        <div class="modern-accordion-content"><p>Contact our Customer Care Executive at: <a href="mailto:support@mor.com" style="color: #333;">support@mor.com</a> or call us at <a href="tel:+919885489448" style="color: #333;">+91-9885489448</a>.</p></div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Customer Reviews Section -->
        <div class="modern-reviews-container">
            <div class="reviews-section-header">
                <h2>Customer Reviews</h2>
            </div>
            <div class="reviews-list" id="reviews-list" style="margin-top: 1.5rem;">
                <!-- Customer reviews will be dynamically added here -->
            </div>
            <div class="review-button-container">
                <button class="write-review-btn" id="write-review-btn"><i class="fas fa-pen"></i> Write a Review</button>
            </div>
        </div>

        <!-- Related Products Section -->
        <section class="related-products-section animate-fade-in">
            <h2>You Might Also Like</h2>
            <div class="featured-scroll" id="related-products-container">
                <!-- Related products will be injected here by JS -->
            </div>
        </section>
    </main>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/919885489448" class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="Chat with us on WhatsApp">
        <i class="fab fa-whatsapp"></i>
        <span class="whatsapp-text">WhatsApp</span>
    </a>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast"></div>

    <!-- Login Required Modal -->
    <div id="login-required-modal" class="modal-overlay" style="display: none;">
        <div class="login-required-modal-content">
            <span class="modal-close login-required-modal-close">&times;</span>
            <h3>Login Required</h3>
            <p>You need to be logged in to use this feature.</p>
            <button class="cta-btn" id="login-now-btn">Login Now</button>
        </div>
    </div>

    <!-- Component Placeholders for mor.js -->
    <div class="overlay"></div>
    <div id="login-modal" class="modal-overlay" style="display: none;">
        <div class="login-modal-content">
            <span class="modal-close login-modal-close">&times;</span>
            <h2 id="login-modal-title">Welcome Back</h2>
            <div class="login-toggle-options">
                <button class="login-toggle-btn active" data-method="email">Email</button>
                <button class="login-toggle-btn" data-method="phone">Phone</button>
            </div>
            <p id="login-modal-subtitle">Log in to access your account and favorites.</p>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="you@example.com" required>
                </div>
                <div class="form-group" id="mobile-number-group" style="display: none;">
                    <label for="mobile-number">Mobile Number</label>
                    <input type="tel" id="mobile-number" placeholder="10-digit mobile number" pattern="[0-9]{10}">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" placeholder="••••••••" required>
                    <i class="fas fa-eye toggle-password"></i>
                </div>
                <div class="form-group" id="forgot-password-group">
                    <a href="#" id="forgot-password-link">Forgot Password?</a>
                </div>
                <div class="form-group" id="confirm-password-group" style="display: none;">
                    <label for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" placeholder="••••••••">
                    <i class="fas fa-eye toggle-password"></i>
                </div>
                <div class="form-group" id="otp-group" style="display: none;">
                    <label for="otp-input">Enter OTP</label>
                    <input type="text" id="otp-input" placeholder="6-digit OTP" pattern="[0-9]{6}">
                </div>
                <button type="submit" class="login-submit-btn" id="login-submit-btn">Log In</button>
            </form>
            <p class="create-account-link">
                <span id="toggle-view-text">Don't have an account? </span>
                <a href="#" id="toggle-view-link">Create your account</a>
            </p>
        </div>
    </div>
    <div id="favorites-popup" class="favorites-popup">
        <div class="favorites-header">
            <h3>Your Favorites</h3>
            <button class="close-favorites-btn" aria-label="Close Favorites"><i class="fas fa-times"></i></button>
        </div>
        <div class="favorites-content">
            <div class="favorites-empty">
                <i class="far fa-heart"></i>
                <p>You have no favorites yet</p>
                <button class="cta-btn start-browsing-btn">Start Browsing</button>
            </div>
            <div class="favorites-items" style="display: none;"></div>
        </div>
    </div>

    <footer class="footer" id="footer-placeholder"></footer>

    <!-- Core Scripts -->
    <script src="mor.js"></script>
    <script src="products.js"></script> <!-- The data source -->
    <script src="src/product-loader.js"></script> <!-- The logic to populate this page -->
    
    <!-- Module Scripts -->
     <script type="module" src="./src/auth.js"></script>
    <script type="module" src="./src/cart.js"></script>
    <script type="module" src="./src/review.js"></script>
    <script type="module" src="./src/fav.js"></script>

    <!-- Utility Scripts -->
    <script src="./src/footer-loader.js"></script>
    <script src="./src/horizontalfade.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mobileAuthContainer = document.getElementById('mobile-auth-link-container');

            function updateAuthUI() {
                // This check relies on the function made available by mor.js and src/auth.js
                if (window.isUserLoggedIn && window.isUserLoggedIn()) {
                    // User is logged in, show Logout button
                    mobileAuthContainer.innerHTML = `
                        <a href="logout.html" class="nav-link-button" id="mobile-logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    `;
                }
                // If not logged in, the default "Login" link from the HTML will be present.
            }
            // A small delay to ensure auth status from Firebase is likely settled.
            setTimeout(updateAuthUI, 200);
        });
    </script>
</body>
</html>